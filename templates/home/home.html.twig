{% extends 'base.html.twig' %}

{% block title %}Home | FootNews{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" href="{{ asset('styles/accueil.css') }}"> 
{% endblock %}

{% block body %}
<div class="containermt-5">
    <img src="{{ asset('Images/imgaccueil.svg') }}" class="img-home" alt="Image de Couverture">

    <main>
        <!-- Section des actualit√©s -->
        <section class="news-section">
            <h2>Top News</h2>

            <!-- Conteneur d'articles en grille -->
            <div class="news-grid">
                {% if articles is not empty %}
                    {% for article in articles %}
                        <a href="{{ path('article_show', { 'id': article.id }) }}" class="news-item">
                            <!-- Image de l'article (par d√©faut si aucune image) -->
                            <img src="{{ article.image ? asset('uploads/articles/' ~ article.image) : asset('Images/article_default.webp') }}" alt="{{ article.titre }}">

                            <!-- Titre de l'article -->
                            <h3>{{ article.titre }}</h3>

                            <!-- Date de publication -->
                            <p class="article-date">üóìÔ∏è Publi√© le {{ article.createdAt|date('d/m/Y H:i') }}</p>

                            <!-- Aper√ßu du contenu -->
                            <p>{{ article.contenu|slice(0, 100) ~ '...' }}</p>
                        </a>
                    {% endfor %}
                {% else %}
                    <p>Aucun article disponible pour le moment.</p>
                {% endif %}
            </div>
        </section>

        <!-- Section des vid√©os -->
        <section class="video-section">
            <h2>Vid√©os</h2>

            <!-- Conteneur de vid√©os en grille -->
            <div class="video-grid">
                {% if videos is empty %}
                    <p>Aucune vid√©o disponible pour le moment.</p>
                {% else %}
                    {% for video in videos %}
                        <div class="video-item">
                            <!-- Titre de la vid√©o -->
                            <h3>{{ video.title }}</h3>

                            <!-- Iframe YouTube -->
                            {% set youtubeId = video.youtubeUrl|split('v=')[1]|split('&')[0] %}
                            <iframe 
                                width="100%" 
                                height="315" 
                                src="https://www.youtube.com/embed/{{ youtubeId }}" 
                                frameborder="0" 
                                allowfullscreen>
                            </iframe>

                            <!-- Date d'ajout -->
                            <p class="video-date">üóìÔ∏è Ajout√©e le {{ video.createdAt|date('d/m/Y H:i') }}</p>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
        </section>
    </main>
</div>
{% endblock %}